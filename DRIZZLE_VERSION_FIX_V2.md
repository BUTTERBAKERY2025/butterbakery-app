# تحديث إصدارات Drizzle (الإصدار الثاني)

## تحليل الخطأ

تم اكتشاف مشكلة توافق جديدة بين إصدارات حزم Drizzle. المشكلة الرئيسية هي:

- حزمة `drizzle-zod@0.5.1` تتطلب إصدار `drizzle-orm@>=0.36.0`
- لكننا نحاول استخدام `drizzle-orm@0.30.6`

## الإصدارات المتوافقة الجديدة

بناءً على تحليل متطلبات التوافق، نوصي بالإصدارات التالية:

- `drizzle-orm`: 0.36.0
- `drizzle-zod`: 0.5.1
- `drizzle-kit`: 0.30.4

## كيفية التحديث

### للمستخدمين المحليين

```bash
# إزالة الحزم المتعارضة
npm uninstall drizzle-orm drizzle-zod drizzle-kit

# تثبيت الإصدارات المتوافقة
npm install drizzle-orm@0.36.0 drizzle-zod@0.5.1 drizzle-kit@0.30.4
```

### لبيئة Render.com

يجب تعديل ملف `package.json` ليحتوي على:

```json
"dependencies": {
  "drizzle-orm": "0.36.0",
  "drizzle-zod": "0.5.1"
},
"devDependencies": {
  "drizzle-kit": "0.30.4"
}
```

وذلك للتأكد من تحميل الإصدارات المحددة بالضبط وليس أي إصدارات أحدث قد تسبب مشاكل.

## ملاحظات إضافية

- عند استخدام `npm install` مع الإصدار المحدد (بدون ^ أو ~)، يتم تثبيت الإصدار المحدد بالضبط.
- استخدام `--legacy-peer-deps` قد يحل المشكلة مؤقتًا، لكنه يتجاهل التحقق من توافق الإصدارات وقد يؤدي إلى مشاكل لاحقة.

## اختبار التوافق

بعد تحديث الإصدارات، يمكن استخدام سكريبت `check-drizzle-versions.mjs` للتحقق من توافق الإصدارات:

```bash
node check-drizzle-versions.mjs
```

---

تاريخ التحديث: 28 مارس 2025