# دليل النشر الطارئ على Render.com

## مقدمة

هذا الدليل مخصص للنشر الطارئ للتطبيق على Render.com عندما تظهر مشاكل مع حزم المشروع العادية. يستخدم هذا الإجراء حزمة مبسطة من المشروع تحتوي على الحد الأدنى من المتطلبات لتشغيل خادم طوارئ يحتوي على نقطة نهاية `/health` للتأكد من أن الخدمة تعمل.

## الملفات الضرورية

تم إنشاء حزمة النشر الطارئ `butterbakery-emergency-complete.zip` التي تحتوي على:

1. `package.json` - يحتوي على تبعيات الحد الأدنى (express و dotenv فقط)
2. `server.js` - ملف الخادم البسيط الذي يعرض صفحة HTML أساسية
3. مجلد `public` للملفات الثابتة

## خطوات النشر

1. **تحميل الحزمة**: قم بتنزيل ملف `butterbakery-emergency-complete.zip` إلى جهازك.

2. **إنشاء مستودع GitHub جديد**:
   - قم بإنشاء مستودع جديد على GitHub (أو استخدم المستودع الحالي بعد تنظيفه).
   - استخرج محتويات الحزمة ورفعها إلى المستودع.

3. **إنشاء خدمة ويب جديدة على Render.com**:
   - سجل دخولك إلى [Render.com](https://render.com).
   - انقر على "New" ثم اختر "Web Service".
   - حدد "Connect a GitHub repository".
   - اختر المستودع الذي أنشأته للتو.
   - املأ التفاصيل:
     - **Name**: `butterbakery-emergency` (أو أي اسم تفضله)
     - **Environment**: `Node`
     - **Build Command**: `npm install`
     - **Start Command**: `npm start`
     - **Node Version**: 16.x

4. **إضافة متغيرات البيئة** (اختياري):
   - إذا كنت بحاجة إلى متغيرات بيئة أساسية، أضفها في قسم "Environment Variables".
   - على الأقل، قد ترغب في إضافة `PORT=10000` (أو أي منفذ آخر).

5. **بدء النشر**:
   - انقر على "Create Web Service".
   - انتظر حتى يكتمل النشر (قد يستغرق بضع دقائق).

6. **التحقق من النشر**:
   - بعد اكتمال النشر، انقر على رابط التطبيق المعروض.
   - تأكد من أنك ترى صفحة "ButterBakery OPS - وضع الطوارئ".
   - للتحقق من نقطة نهاية الصحة، قم بزيارة `رابط_التطبيق/health`.

## استكمال النشر الكامل

بعد التأكد من عمل خدمة الطوارئ، يمكنك بدء التفكير في حل المشكلات الأساسية في المشروع الرئيسي والنشر الكامل.

### ملاحظات مهمة لتصحيح مشاكل arabic-reshaper

1. تأكد من تعديل ملف `package.json` بالإصدار الصحيح من `arabic-reshaper`. في حالتنا، يبدو أن الإصدارات `3.0.0` و `2.1.3` غير متوفرة. لاحظ أن الإصدار `1.1.0` هو المتوفر حاليًا.

2. قم بتعديل الكود الذي يستخدم هذه المكتبة لضمان توافقه مع الإصدار المتاح.

3. اختبر محليًا قبل النشر إذا أمكن.

4. استخدم أداة مثل [npm-view](https://docs.npmjs.com/cli/v8/commands/npm-view) للتحقق من الإصدارات المتاحة:
   ```
   npm view arabic-reshaper versions
   ```

## ملاحظات حول استكشاف أخطاء النشر

- إذا استمرت مشاكل التبعيات، حاول نشر نسخة أكثر بساطة من التطبيق ثم أضف التبعيات تدريجيًا.
- تحقق من سجلات البناء في Render.com لمعرفة الأخطاء المحددة.
- تأكد من أن جميع التبعيات المطلوبة متوفرة في الإصدارات المحددة.
- تأكد من توافق إصدار Node.js المحدد مع متطلبات المشروع.

## الاتصال بمستودع GitHub موجود

إذا كنت تفضل استخدام مستودع GitHub موجود بدلاً من إنشاء مستودع جديد:

1. قم بتنظيف المستودع الحالي أو إنشاء فرع جديد.
2. أضف محتويات حزمة الطوارئ إلى المستودع.
3. ادفع التغييرات إلى GitHub.
4. اتبع نفس خطوات الإعداد في Render.com مع تحديد المستودع أو الفرع المناسب.