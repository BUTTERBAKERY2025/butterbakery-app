# دليل استكشاف الأخطاء وإصلاحها

هذا الدليل يساعدك في حل المشكلات الشائعة التي قد تواجهها أثناء نشر وتشغيل تطبيق ButterBakery.

## مشكلات النشر على Render.com

### المشكلة: فشل البناء (Build Failed)

#### الأسباب المحتملة:
- خطأ في ملف الضغط المرفوع
- خطأ في أمر البناء
- مشكلة في تثبيت التبعيات

#### الحلول:
1. تحقق من أن ملف الضغط يحتوي على كافة الملفات الضرورية
2. تأكد من أن أمر البناء هو `npm install`
3. راجع سجلات البناء للتعرف على التفاصيل المحددة للخطأ
4. حاول تنزيل نسخة جديدة من ملف الضغط وأعد المحاولة

### المشكلة: فشل التشغيل (Runtime Error)

#### الأسباب المحتملة:
- خطأ في أمر البدء
- مشكلة في متغيرات البيئة
- عدم تمكن التطبيق من الاتصال بقاعدة البيانات

#### الحلول:
1. تأكد من أن أمر البدء هو `node start.js`
2. تحقق من متغيرات البيئة:
   - `DATABASE_URL` يجب أن يشير إلى عنوان الاتصال الداخلي لقاعدة البيانات
   - `NODE_ENV` يجب أن يكون `production`
   - `PORT` يجب أن يكون `10000`
3. راجع سجلات التطبيق من علامة التبويب "Logs"

### المشكلة: بطء تحميل التطبيق للمرة الأولى

#### الأسباب المحتملة:
- الخطة المجانية من Render.com تضع التطبيق في وضع السكون بعد فترة من عدم النشاط

#### الحلول:
- هذا طبيعي في الخطة المجانية - يستغرق الأمر عادة 30-60 ثانية لإعادة تشغيل التطبيق بعد فترة من عدم النشاط
- يمكنك الترقية إلى خطة مدفوعة إذا كنت بحاجة إلى زمن استجابة أسرع
- يمكنك إعداد "ping" تلقائي كل 10-15 دقيقة للحفاظ على حالة نشاط التطبيق

## مشكلات قاعدة البيانات

### المشكلة: خطأ الاتصال بقاعدة البيانات

#### الأسباب المحتملة:
- عنوان الاتصال بقاعدة البيانات غير صحيح
- قاعدة البيانات غير مُشغلة
- صلاحيات الوصول غير كافية

#### الحلول:
1. تحقق من صحة عنوان الاتصال `DATABASE_URL` في متغيرات البيئة
2. تأكد من استخدام عنوان الاتصال **الداخلي** (Internal Connection URL) وليس الخارجي
3. تحقق من حالة قاعدة البيانات في لوحة تحكم Render.com
4. تحقق من سجلات التطبيق للحصول على رسائل الخطأ المحددة

### المشكلة: خطأ في ترحيل قاعدة البيانات (Database Migration Error)

#### الأسباب المحتملة:
- تغييرات غير متوافقة في هيكل قاعدة البيانات
- مشكلة في تنفيذ عمليات الترحيل

#### الحلول:
1. راجع سجلات التطبيق للحصول على تفاصيل الخطأ
2. للمستخدمين المتقدمين: تحقق من حالة قاعدة البيانات باستخدام أداة مثل pgAdmin
3. في الحالات القصوى: قد تحتاج إلى إعادة تعيين قاعدة البيانات وبدء التطبيق من جديد

### المشكلة: أداء بطيء لقاعدة البيانات

#### الأسباب المحتملة:
- حجم البيانات الكبير
- محدودية موارد الخطة المجانية
- عدم تحسين الاستعلامات

#### الحلول:
1. ترقية خطة قاعدة البيانات للحصول على موارد أكثر
2. تنظيف البيانات القديمة غير الضرورية
3. التأكد من وجود فهارس مناسبة على الجداول الأكثر استخدامًا

## مشكلات تسجيل الدخول

### المشكلة: عدم القدرة على تسجيل الدخول

#### الأسباب المحتملة:
- نسيان بيانات تسجيل الدخول
- مشكلة في بيانات المستخدم في قاعدة البيانات
- خطأ في ملفات الجلسة (session)

#### الحلول:
1. تذكر أن بيانات تسجيل الدخول الافتراضية هي:
   - اسم المستخدم: `admin`
   - كلمة المرور: `admin`
2. إذا قمت بتغيير كلمة المرور ونسيتها، يمكنك:
   - استعادة قاعدة البيانات من نسخة احتياطية سابقة
   - للمستخدمين المتقدمين: الوصول مباشرة إلى قاعدة البيانات وتعديل كلمة المرور

### المشكلة: انتهاء صلاحية الجلسة بشكل متكرر

#### الأسباب المحتملة:
- إعادة تشغيل الخدمة
- مشكلة في إعدادات الجلسة

#### الحلول:
1. قم بتسجيل الخروج وتسجيل الدخول مرة أخرى
2. امسح ذاكرة التخزين المؤقت والكوكيز في متصفحك
3. ترقية خطة الخدمة لتجنب إعادة التشغيل المتكرر

## مشكلات واجهة المستخدم

### المشكلة: مشاكل في عرض الواجهة

#### الأسباب المحتملة:
- مشكلة في تحميل ملفات CSS/JavaScript
- توافق المتصفح
- حجم الشاشة أو اتجاهها

#### الحلول:
1. حاول تحديث الصفحة (F5)
2. امسح ذاكرة التخزين المؤقت للمتصفح
3. جرب متصفحًا آخر (Chrome أو Firefox أو Edge الأحدث)
4. تأكد من استخدام متصفح حديث

### المشكلة: أخطاء في الضبط العربي

#### الأسباب المحتملة:
- مشكلة في تحميل الخطوط العربية
- إعدادات اللغة في المتصفح

#### الحلول:
1. تأكد من تثبيت الخطوط العربية في نظامك
2. استخدم متصفحًا يدعم اللغة العربية بشكل جيد
3. تحقق من إعدادات المتصفح للتأكد من دعم اللغات من اليمين إلى اليسار

## مشكلات تقنية متقدمة

### المشكلة: استهلاك عالٍ للذاكرة

#### الأسباب المحتملة:
- عدد كبير من الاتصالات المتزامنة
- تسريب الذاكرة في التطبيق
- محدودية موارد الخطة الحالية

#### الحلول:
1. ترقية خطة الخدمة للحصول على موارد أكثر
2. تحسين التطبيق لاستخدام الذاكرة بشكل أفضل (للمطورين)
3. مراقبة استخدام الموارد من خلال لوحة تحكم Render.com

### المشكلة: انقطاع الاتصال بشكل متكرر

#### الأسباب المحتملة:
- مشكلات في الشبكة
- إعادة تشغيل الخدمة على Render.com
- قيود على عدد الاتصالات المتزامنة

#### الحلول:
1. التحقق من اتصال الإنترنت الخاص بك
2. ترقية خطة الخدمة لتجنب إعادة التشغيل المتكرر
3. تحسين التطبيق للتعامل بشكل أفضل مع انقطاعات الاتصال (للمطورين)

## الحصول على المساعدة

إذا استمرت المشكلة بعد محاولة الحلول المذكورة أعلاه:

1. راجع وثائق [Render.com](https://render.com/docs) للحصول على مساعدة إضافية
2. ابحث عن المشكلة في منتديات الدعم على الإنترنت
3. استشر مطورًا أو مسؤول نظام للحصول على مساعدة فنية متخصصة

---

**ملاحظة**: يتم تحديث هذا الدليل بشكل مستمر لتضمين الحلول للمشكلات الشائعة التي قد تواجهها.